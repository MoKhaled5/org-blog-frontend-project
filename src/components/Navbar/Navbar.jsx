import React from 'react'
import { Link } from 'react-router-dom'
import AuthButton from './AuthButton'
import ThemeToggle from './ThemeToggle'
import LogOutButton from './LogOutButton'
import UserProfile from './UserProfile'
import { useState, useEffect } from 'react'
import { useAuth } from '../../context/AuthContext';



export default function Navbar() {
  const { user } = useAuth();

  return (
    <nav className='bg-white dark:bg-[#1A1A1A] w-full h-[70px] sm:h-[100px] fixed top-0 z-40'>
        <div className='container h-full mx-auto flex justify-between items-center border-b-2 border-[#DDDDDD] dark:border-[#535353] px-5'>
            <Link to='/' className='cursor-pointer'>
                 <svg className='h-[40px] sm:h-[60px]' xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 137 60">
                    <g className='fill-[#1A1A1A] dark:fill-white' clipPath="url(#clip0_72_2575)">
                      <path d="M23.475 30.42a3.553 3.553 0 0 1-3.555-3.555 3.547 3.547 0 0 1 3.555-3.547 3.55 3.55 0 0 1 3.555 3.547 3.563 3.563 0 0 1-3.555 3.555M35.377 33.293a1.195 1.195 0 0 1-.09 1.68c-.885.794-3.307 2.632-6.84 2.632h-.157c-3.458-.052-5.828-1.86-6.683-2.633a1.195 1.195 0 0 1-.09-1.68 1.187 1.187 0 0 1 1.68-.082c.66.593 2.475 1.98 5.13 2.025 2.783.045 4.68-1.402 5.37-2.025a1.187 1.187 0 0 1 1.68.082M36.975 26.865a3.553 3.553 0 0 1-3.555 3.555 3.551 3.551 0 1 1 0-7.103 3.556 3.556 0 0 1 3.555 3.548"></path>
                      <path d="M53.093 13.568C50.557 9.105 47.145 5.73 42.84 3.45 38.535 1.148 33.742 0 28.447 0 23.154 0 18.3 1.148 13.996 3.45Q7.574 6.872 3.773 13.568.001 20.248 0 30c0 6.502 1.26 11.925 3.773 16.395q3.8 6.671 10.222 10.147C18.3 58.845 23.115 60 28.448 60c5.332 0 10.087-1.148 14.392-3.428 4.305-2.294 7.717-5.67 10.252-10.125 2.535-4.462 3.803-9.952 3.803-16.447s-1.268-11.977-3.803-16.432M47.257 34.41c0 3.488-2.452 6.585-6 7.11-2.062.3-4.14.532-6.224.682a.7.7 0 0 0-.533.308l-4.935 7.403a1.342 1.342 0 0 1-2.235 0l-4.935-7.403a.7.7 0 0 0-.532-.307 86 86 0 0 1-6.225-.683c-3.548-.525-6-3.63-6-7.11V23.625c0-3.488 2.452-6.593 6-7.11a87 87 0 0 1 12.81-.93c4.35 0 8.624.315 12.81.93 3.547.525 6 3.622 6 7.11z"></path>
                      <path fillRule="evenodd" d="M23.475 30.42a3.553 3.553 0 0 1-3.555-3.555 3.547 3.547 0 0 1 3.555-3.547 3.55 3.55 0 0 1 3.555 3.547 3.563 3.563 0 0 1-3.555 3.555M35.377 33.293a1.195 1.195 0 0 1-.09 1.68c-.885.794-3.307 2.632-6.84 2.632h-.157c-3.458-.052-5.828-1.86-6.683-2.633a1.195 1.195 0 0 1-.09-1.68 1.187 1.187 0 0 1 1.68-.082c.66.593 2.475 1.98 5.13 2.025 2.783.045 4.68-1.402 5.37-2.025a1.187 1.187 0 0 1 1.68.082M36.975 26.865a3.553 3.553 0 0 1-3.555 3.555 3.551 3.551 0 1 1 0-7.103 3.556 3.556 0 0 1 3.555 3.548" clipRule="evenodd"></path>
                      <path fillRule="evenodd" d="M27.03 26.865a3.56 3.56 0 0 1-3.555 3.555 3.56 3.56 0 0 1-3.555-3.555 3.547 3.547 0 0 1 3.555-3.547 3.55 3.55 0 0 1 3.555 3.547M36.975 26.865a3.553 3.553 0 0 1-3.555 3.555 3.551 3.551 0 1 1 0-7.103 3.556 3.556 0 0 1 3.555 3.548" clipRule="evenodd"></path>
                      <path d="M35.287 34.973c-.885.794-3.307 2.632-6.84 2.632h-.157c-3.458-.052-5.828-1.86-6.683-2.633a1.195 1.195 0 0 1-.09-1.68 1.187 1.187 0 0 1 1.68-.082c.66.593 2.475 1.98 5.13 2.025 2.783.045 4.68-1.402 5.37-2.025a1.187 1.187 0 0 1 1.68.082 1.195 1.195 0 0 1-.09 1.68M89.64 11.31c-.99-1.74-2.333-3.06-4.005-3.96Q83.103 6 80.009 6c-2.062 0-3.975.45-5.647 1.35-1.68.9-3.007 2.22-4.005 3.96-.983 1.747-1.463 3.885-1.463 6.428 0 2.542.48 4.68 1.463 6.427.998 1.74 2.325 3.06 4.005 3.968 1.672.9 3.563 1.35 5.648 1.35s3.937-.45 5.624-1.335c1.673-.9 3.016-2.228 4.005-3.96.983-1.755 1.486-3.9 1.486-6.45s-.503-4.68-1.486-6.428m-5.453 9.9c-.352.945-.892 1.657-1.59 2.145-.705.48-1.56.727-2.587.727s-1.898-.247-2.61-.727c-.69-.488-1.23-1.2-1.59-2.145q-.54-1.416-.54-3.472c0-1.373.18-2.52.54-3.458.36-.937.9-1.665 1.59-2.145.712-.495 1.582-.735 2.61-.735s1.882.24 2.587.735c.698.48 1.238 1.207 1.59 2.145.368.938.547 2.085.547 3.458q.002 2.056-.547 3.472M108.45 20.64c1.2-.562 2.13-1.373 2.797-2.415q1.093-1.687 1.095-4.14c0-1.635-.36-3.015-1.057-4.178-.713-1.17-1.703-2.047-2.97-2.662q-1.914-.936-4.448-.937h-9.87v22.867h6.203V21.63h2.145l4.012 7.545h6.75zm-3-4.988c-.278.406-.675.698-1.2.886-.51.18-1.14.27-1.86.27h-2.19v-5.543h2.19c.72 0 1.35.105 1.86.307.525.188.922.503 1.2.908q.414.617.412 1.605c0 .66-.135 1.17-.412 1.567M126.24 16.403v4.425h4.14c-.008.637-.165 1.207-.458 1.68-.315.502-.787.9-1.417 1.17s-1.418.404-2.355.404c-1.065 0-1.973-.255-2.693-.757s-1.26-1.238-1.627-2.19c-.368-.953-.548-2.093-.548-3.435s.188-2.46.563-3.397c.39-.93.945-1.658 1.68-2.16.735-.495 1.627-.743 2.662-.743.48 0 .93.053 1.328.165.405.105.765.263 1.065.48.315.21.577.457.787.765q.313.46.458 1.035h6.262a7.8 7.8 0 0 0-1.005-3.158 8.3 8.3 0 0 0-2.167-2.49 10.2 10.2 0 0 0-3.09-1.627q-1.745-.585-3.78-.585c-1.538 0-2.978.262-4.328.787a10.2 10.2 0 0 0-3.562 2.288c-1.028 1.005-1.823 2.242-2.408 3.698-.577 1.455-.862 3.135-.862 5.017 0 2.423.472 4.493 1.402 6.248.953 1.747 2.265 3.09 3.938 4.042 1.687.945 3.637 1.418 5.865 1.418 1.987 0 3.765-.39 5.302-1.17a8.8 8.8 0 0 0 3.638-3.398c.892-1.477 1.327-3.255 1.327-5.34v-3.172h-10.132zM81.727 46.012c-.398-.705-.9-1.252-1.493-1.627-.607-.375-1.2-.585-1.792-.623v-.187a5.3 5.3 0 0 0 1.545-.698c.48-.322.855-.742 1.148-1.29.292-.54.442-1.222.442-2.055 0-.945-.21-1.807-.638-2.572-.434-.78-1.08-1.403-1.957-1.868s-1.98-.697-3.33-.697h-6.758V53.73h6.99c1.523 0 2.753-.233 3.706-.683s1.642-1.065 2.084-1.83c.435-.78.66-1.65.66-2.625s-.195-1.882-.607-2.58m-10.5-9.532h4.425c1.282 0 2.227.292 2.82.892.585.593.885 1.313.885 2.16q0 1.013-.517 1.778c-.323.502-.788.892-1.35 1.17-.57.27-1.208.412-1.905.412h-4.358zm7.905 14.287c-.638.585-1.725.893-3.248.893h-4.657v-6.728h4.763c.847 0 1.575.165 2.197.51a3.6 3.6 0 0 1 1.418 1.343c.337.547.502 1.162.502 1.807q.002 1.273-.975 2.175M88.53 51.66V34.395h-2.348V53.73h11.332v-2.07zM115.59 38.782c-.735-1.492-1.748-2.632-3.03-3.435q-1.934-1.215-4.395-1.215c-1.643 0-3.12.405-4.41 1.215-1.275.803-2.28 1.943-3.03 3.435-.735 1.478-1.095 3.24-1.095 5.28s.36 3.803 1.095 5.288c.75 1.485 1.755 2.632 3.03 3.442 1.29.795 2.76 1.208 4.41 1.208s3.105-.413 4.395-1.208c1.282-.81 2.295-1.957 3.03-3.442q1.102-2.228 1.102-5.288 0-3.062-1.102-5.28m-2.003 9.518c-.555 1.147-1.305 2.025-2.25 2.625a5.93 5.93 0 0 1-3.172.885c-1.17 0-2.235-.3-3.18-.885-.953-.6-1.703-1.478-2.265-2.625-.548-1.155-.833-2.565-.833-4.238 0-1.672.285-3.082.833-4.237.562-1.148 1.312-2.025 2.265-2.61.945-.593 2.01-.885 3.18-.885s2.22.292 3.172.885c.945.585 1.695 1.462 2.25 2.61.563 1.155.84 2.565.84 4.237s-.277 3.083-.84 4.238M129.015 44.062v2.085h5.092c-.03 1.125-.255 2.1-.712 2.933a5.03 5.03 0 0 1-1.98 2.017q-1.26.711-2.925.713c-1.2 0-2.28-.3-3.233-.885-.96-.6-1.71-1.478-2.28-2.625-.555-1.155-.832-2.565-.832-4.238q.002-2.506.825-4.237c.555-1.148 1.305-2.025 2.242-2.61.938-.593 1.973-.885 3.12-.885.698 0 1.343.09 1.928.285a4.9 4.9 0 0 1 1.567.81 5.7 5.7 0 0 1 1.2 1.305c.338.502.608 1.072.825 1.71h2.408a7.8 7.8 0 0 0-.96-2.565 7.5 7.5 0 0 0-1.74-1.98 7.8 7.8 0 0 0-2.378-1.298 8.5 8.5 0 0 0-2.85-.465c-1.237 0-2.377.225-3.405.69-1.035.458-1.92 1.125-2.685 1.988-.75.855-1.335 1.905-1.755 3.135-.405 1.215-.607 2.595-.607 4.117 0 2.04.352 3.803 1.065 5.288.727 1.485 1.74 2.632 3.022 3.442 1.305.795 2.805 1.208 4.523 1.208q2.295 0 4.072-.968a7 7 0 0 0 2.79-2.737c.683-1.178 1.02-2.565 1.02-4.148v-2.085z"></path>
                    </g>
                    <defs>
                      <clipPath id="clip0_72_2575">
                        <path fill="#fff" d="M0 0h136.372v60H0z"></path>
                      </clipPath>
                    </defs>
                  </svg>
            </Link>

              <div className='flex items-center gap-2 sm:gap-2'>
              { user ?
                (
                  <>
                    <UserProfile user={user}/>
                    <LogOutButton/>
                  </>
                ) : (<AuthButton />)
              }
              <div className='flex items-center gap-1 sm:gap-5'>
                <ThemeToggle />
              </div>
            </div>
        </div>
    </nav>
  )
}

